<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dima AI - ديما: وكيلك الكوني لنمو تجارتك في الجزائر</title>
    <link rel="stylesheet" href="style.css">
    <!-- Firebase App (Core) SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js"></script>
    <!-- Firebase Authentication SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth.js"></script>
</head>
<body>

    <header class="hero">
        <div class="starfield-layer" id="starfield"></div>
        <div class="container hero-navigation-container">
            <nav class="hero-navigation">
                <a href="#" class="hero-logo-link"><h2 class="hero-logo-text">Dima AI</h2></a>
                <div class="auth-actions">
                    <a href="#login-modal" class="auth-link">تسجيل الدخول</a>
                    <a href="#signup-modal" class="btn btn-signup">إنشاء حساب</a>
                </div>
            </nav>
        </div>
        <div class="container hero-content-container">
            <div class="hero-content">
                 <div class="hero-text animate-on-scroll">
                    <span class="tagline">Dima AI - ديما الذكي</span>
                    <h1>وكيلك الكوني لنمو تجارتك <br class="d-none d-md-block">في الجزائر.</h1>
                    <p class="light-text lead">
                        انطلق في رحلة التميز الرقمي مع "ديما". ذكاء اصطناعي متقدم يفهم لهجتك بعمق، 
                        ويتواصل مع عملائك بفعالية، مما يفتح آفاقًا جديدة لتطوير أعمالك.
                    </p>
                    <div class="hero-ctas">
                        <a href="#demo-cta" class="btn btn-primary">اكتشف المجرة التجريبية</a>
                        <a href="#pricing-plans" class="btn btn-secondary">اكتشف باقاتنا الكونية</a>
                    </div>
                </div>
                <div class="hero-visual animate-on-scroll stagger-item" style="--stagger-delay: 0.2s;">
                    <div class="neural-cosmos-container" id="neuralCosmos">
                        <div class="node dima-core-node"></div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <section id="features" class="features-section section-padding">
        <div class="container">
            <h2 class="animate-on-scroll">لماذا <span class="highlight">ديما</span> هو وكيلك المثالي؟</h2>
            <div class="features-grid">
                <div class="feature-card animate-on-scroll stagger-item" style="--stagger-delay: 0s;">
                    <div class="icon"> 
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                        </svg> 
                    </div> 
                    <h3>فهم متقدم للدارجة الجزائرية</h3> 
                    <p>مدعوم بنماذج لغوية متخصصة، يتفاعل "ديما" بذكاء مع عملائك بلهجتهم المحلية.</p> 
                </div>
                <div class="feature-card animate-on-scroll stagger-item" style="--stagger-delay: 0.1s;">
                    <div class="icon"> 
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"></path>
                            <path d="M12 6v6l4 2"></path>
                        </svg> 
                    </div> 
                    <h3>دعم مستمر على مدار الساعة</h3> 
                    <p>يوفر "ديما" إجابات فورية لاستفسارات العملاء، مما يعزز رضاهم وثقتهم.</p> 
                </div>
                <div class="feature-card animate-on-scroll stagger-item" style="--stagger-delay: 0.2s;">
                    <div class="icon"> 
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="11" cy="11" r="8"></circle>
                            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                        </svg> 
                    </div> 
                    <h3>بحث ذكي ودقيق</h3> 
                    <p>يساعد "ديما" عملاءك في العثور على المنتجات التي يحتاجونها بسرعة وسهولة.</p> 
                </div>
                <div class="feature-card animate-on-scroll stagger-item" style="--stagger-delay: 0.3s;">
                    <div class="icon"> 
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path>
                            <line x1="3" y1="6" x2="21" y2="6"></line>
                            <path d="M16 10a4 4 0 0 1-8 0"></path>
                        </svg> 
                    </div> 
                    <h3>إدارة الطلبات والدفع</h3> 
                    <p>يبسط "ديما" عملية الشراء والدفع، مما يعزز تجربة العملاء ويزيد من ولائهم.</p> 
                </div>
                <div class="feature-card animate-on-scroll stagger-item" style="--stagger-delay: 0.4s;">
                    <div class="icon"> 
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                            <circle cx="9" cy="7" r="4"></circle>
                            <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                            <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                        </svg> 
                    </div> 
                    <h3>تحويل سلس إلى فريقك</h3> 
                    <p>عند الحاجة، ينقل "ديما" المحادثة إلى فريقك مع الاحتفاظ بكامل السياق.</p> 
                </div>
                <div class="feature-card animate-on-scroll stagger-item" style="--stagger-delay: 0.5s;">
                    <div class="icon"> 
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>
                        </svg> 
                    </div> 
                    <h3>زيادة المبيعات وبناء الولاء</h3> 
                    <p>من خلال تجربة مستخدم استثنائية، يساعدك "ديما" على تعزيز أرباحك وبناء علاقات طويلة الأمد.</p> 
                </div>
            </div>
        </div>
    </section>

    <!-- Social Integration Section (REWORKED) -->
    <section id="social-integration" class="social-integration-section section-padding">
        <div class="container">
            <h2 class="dark-text animate-on-scroll">تواصل <span class="highlight">مع عملائك</span> عبر جميع القنوات</h2>
            <p class="section-subtitle animate-on-scroll stagger-item" style="--stagger-delay: 0.1s;">
                كن حاضرًا حيث يتواجد عملاؤك. "ديما" يدعم التكامل مع واتساب، إنستغرام، فيسبوك ماسنجر، وموقعك الإلكتروني.
            </p>
            <div class="social-mockups-container">
                <!-- WhatsApp Mockup -->
                <div class="phone-mockup whatsapp-ui animate-on-scroll stagger-item" style="--stagger-delay: 0.2s;">
                    <div class="phone-frame" style="margin-left: 20px;">
                        <img src="whats.png" alt="WhatsApp Mockup" class="social-mockup-image">
                    </div>
                </div>

                <!-- Instagram Mockup -->
                <div class="phone-mockup instagram-ui animate-on-scroll stagger-item" style="--stagger-delay: 0.35s;">
                    <div class="phone-frame" style="margin-left: 20px;">
                        <img src="insta.png" alt="Instagram Mockup" class="social-mockup-image">
                    </div>
                </div>

                <!-- Messenger Mockup -->
                <div class="phone-mockup messenger-ui animate-on-scroll stagger-item" style="--stagger-delay: 0.5s;">
                    <div class="phone-frame" style="margin-left: 20px;">
                        <img src="facebook.png" alt="Facebook Messenger Mockup" class="social-mockup-image">
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="demo-cta" class="demo-cta-section section-padding">
        <div class="container">
            <div class="demo-cta-content">
                <div class="demo-cta-text animate-on-scroll">
                    <h2 class="light-text">جرب <span style="opacity:0.9; color: var(--gradient-end); text-shadow: 0 0 15px var(--gradient-end);">ديما</span> بنفسك!</h2>
                    <p class="light-text">
                        استكشف إمكانيات "ديما" الذكية. جرب البحث عن المنتجات، أو قم بمحاكاة عملية طلب، 
                        واختبر كيف يمكن لـ "ديما" تحسين تجربة عملائك.
                    </p>
                    <a href="#get-started" class="btn btn-secondary" style="margin-top: 30px; border-color:var(--color-text-light); color:var(--color-text-light); background-color: rgba(255,255,255,0.08);">
                        اطلب عرضًا توضيحيًا الآن
                    </a>
                </div>
                <div class="demo-chat-interface animate-on-scroll stagger-item" style="--stagger-delay: 0.2s;">
                    <div class="demo-chat-messages"> </div>
                    <div class="demo-chat-input-area"> <input type="text" placeholder="اكتب رسالتك بالدارجة هنا..." value="السلام، عندكم صبابط سبور؟" readonly> <button type="button" aria-label="Send message"> <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="0.5" stroke-linecap="round" stroke-linejoin="round"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"></path></svg> </button> </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Pricing Plans Section (REWORKED) -->
    <section id="pricing-plans" class="pricing-section section-padding">
        <div class="container">
            <h2 class="light-text animate-on-scroll">باقات <span class="highlight">ديما</span>: حلول تناسب احتياجاتك</h2>
            <p class="section-subtitle light-text animate-on-scroll stagger-item" style="--stagger-delay: 0.1s;">
                اختر الباقة التي تناسب حجم أعمالك وطموحاتك، واستفد من إمكانيات "ديما" المتقدمة.
            </p>
            <div class="pricing-grid">
                <!-- Plan 1: Stellar Scout -->
                <div class="pricing-card animate-on-scroll stagger-item" style="--stagger-delay: 0.2s;">
                    <div class="plan-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a4.98 4.98 0 0 0-2.91-.09z"/><path d="m12 15-3-3a22 22 0 0 1 2-3.95A12.87 12.87 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z"/><path d="M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0"/><path d="M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5"/></svg>
                    </div>
                    <h3>الكشّاف النجمي</h3>
                    <p class="plan-subtitle">نطاق محدود</p>
                    <div class="price-tag">
                        <span class="currency">د.ج</span>3,500<span class="period">/ شهريًا</span>
                    </div>
                    <ul class="plan-features">
                        <li>قناة تكامل واحدة (واتساب أو موقعك)</li>
                        <li>فهم أساسي للدارجة الجزائرية</li>
                        <li>500 محادثة شهرية بالذكاء الاصطناعي</li>
                        <li>دعم فني عبر البريد الإلكتروني</li>
                    </ul>
                    <a href="#contact-form" class="btn btn-secondary outline-light">ابدأ رحلة الكشّاف</a>
                </div>

                <!-- Plan 2: Galactic Explorer (Featured) -->
                <div class="pricing-card featured-plan animate-on-scroll stagger-item" style="--stagger-delay: 0.3s;">
                    <div class="popular-badge">الأكثر شيوعًا</div>
                    <div class="plan-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z"/><path d="m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65"/><path d="m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65"/></svg>
                    </div>
                    <h3>المستكشف المجري</h3>
                    <p class="plan-subtitle">نمو متسارع</p>
                    <div class="price-tag">
                        <span class="currency">د.ج</span>8,000<span class="period">/ شهريًا</span>
                    </div>
                    <ul class="plan-features">
                        <li class="feature-plus">تشمل كل مزايا الكشّاف النجمي +</li>
                        <li>حتى 3 قنوات تكامل (واتساب، فيسبوك، انستا...)</li>
                        <li>فهم متقدم للدارجة واللهجات المتعددة</li>
                        <li>بحث ذكي ودقيق عن المنتجات</li>
                        <li>2,000 محادثة شهرية بالذكاء الاصطناعي</li>
                        <li>دعم فني ذو أولوية عالية</li>
                    </ul>
                    <a href="#contact-form" class="btn btn-primary">انطلق مع المستكشف</a>
                </div>

                <!-- Plan 3: Cosmic Overlord -->
                <div class="pricing-card animate-on-scroll stagger-item" style="--stagger-delay: 0.4s;">
                    <div class="plan-icon">
                       <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="1"/><path d="M20.2 20.2c2.04-2.03.02-7.53-4.45-11.98-4.49-4.46-9.97-6.48-11.98-4.45-2.04 2.03-.02 7.53 4.45 11.98 4.49 4.46 9.97 6.48 11.98 4.45Z"/><path d="M15.7 15.7c4.44-4.45 6.48-9.97 4.45-11.98-2.03-2.04-7.53-.02-11.98 4.45-4.44 4.45-6.48 9.97-4.45 11.98 2.03 2.04 7.53.02 11.98-4.45Z"/></svg>
                    </div>
                    <h3>سيّد الأكوان</h3>
                     <p class="plan-subtitle">هيمنة كاملة</p>
                    <div class="price-tag">
                        <span class="currency"></span>اتصل بنا<span class="period">حلول مخصصة لمجرتك</span>
                    </div>
                    <ul class="plan-features">
                        <li class="feature-plus">تشمل كل مزايا المستكشف المجري +</li>
                        <li>قنوات تكامل غير محدودة</li>
                        <li>نماذج لغوية مخصصة (Fine-tuning)</li>
                        <li>إدارة طلبات متكاملة مع الدفع</li>
                        <li>محادثات غير محدودة بقدرات الذكاء الاصطناعي</li>
                        <li>مدير حساب خاص ودعم كوني VIP</li>
                    </ul>
                    <a href="mailto:contact@dima.ai?subject=استفسار حول باقة سيد الأكوان" class="btn btn-secondary outline-light">ناقش هيمنتك الكونية</a>
                </div>
            </div>
            <p class="pricing-note light-text animate-on-scroll stagger-item" style="--stagger-delay: 0.5s;">
                هل لديك متطلبات فريدة تحتاج لحلول مصممة خصيصًا لمجرتك؟ 
                <a href="mailto:contact@dima.ai?subject=طلب باقة مخصصة من Dima AI">تواصل معنا</a> الآن!
            </p>
        </div>
    </section>

    <footer id="get-started" class="section-padding">
        <div class="container">
            <div class="footer-logo animate-on-scroll">Dima AI</div>
            <p class="light-text animate-on-scroll stagger-item" style="opacity:0.8; --stagger-delay: 0.1s;">
                هل أنت مستعد للارتقاء بأعمالك مع "ديما"؟
            </p>
            <a href="mailto:contact@dima.ai?subject=Demande d'informations Dima AI" class="btn btn-primary animate-on-scroll stagger-item" style="margin: 25px 0; --stagger-delay: 0.2s;">
                تواصل معنا الآن
            </a>
            <div class="footer-nav animate-on-scroll stagger-item" style="margin-top:20px; --stagger-delay: 0.3s;"> 
                <a href="#">الرئيسية</a> 
                <a href="#features">الميزات</a> 
                <a href="#social-integration">التكامل الاجتماعي</a>
                <a href="#pricing-plans">الباقات</a>
                <a href="#demo-cta">التجربة الكونية</a> 
            </div>
            <p style="margin-top: 30px; font-size:0.9rem; color: #718096;" class="animate-on-scroll stagger-item" style="--stagger-delay: 0.4s;">&copy; <span id="currentYear"></span> Dima AI. كل الحقوق محفوظة في هذا الكون وما وراءه.</p>
            <p style="font-size:0.85rem; color: #718096;" class="animate-on-scroll stagger-item" style="--stagger-delay: 0.5s;">صُمم بحب لنجوم التجارة الإلكترونية في الجزائر.</p>
        </div>
    </footer>

    <!-- Auth Modal -->
    <div class="auth-modal-overlay" id="authModal" role="dialog" aria-modal="true" aria-labelledby="authModalTitle" hidden>
        <div class="auth-modal" role="document">
            <div class="auth-modal-header">
                <h2 id="authModalTitle" class="auth-modal-title">تسجيل الدخول</h2>
                <button class="auth-modal-close" aria-label="إغلاق">&times;</button>
            </div>
            <div class="auth-tabs">
                <button class="auth-tab-btn is-active" data-auth-form="loginForm">تسجيل الدخول</button>
                <button class="auth-tab-btn" data-auth-form="signupForm">إنشاء حساب</button>
            </div>
            <div class="auth-form-container">
                <form id="loginForm" class="auth-form is-active">
                    <div class="form-group">
                        <label for="loginEmail" class="form-label">البريد الإلكتروني</label>
                        <input type="email" id="loginEmail" class="form-input" placeholder="your@email.com" required>
                    </div>
                    <div class="form-group">
                        <label for="loginPassword" class="form-label">كلمة المرور</label>
                        <input type="password" id="loginPassword" class="form-input" placeholder="••••••••" required>
                    </div>
                    <button type="submit" class="btn btn-primary">دخول</button>
                    <div class="auth-divider">أو</div>
                    <button type="button" class="btn btn-auth-google">
                        <svg viewBox="0 0 48 48">
                            <path fill="#EA4335" d="M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"/>
                            <path fill="#4285F4" d="M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"/>
                            <path fill="#FBBC05" d="M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"/>
                            <path fill="#34A853" d="M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"/>
                            <path fill="none" d="M0 0h48v48H0z"/>
                        </svg>
                        <span>الدخول بحساب جوجل</span>
                    </button>
                </form>
                <form id="signupForm" class="auth-form">
                    <div class="form-group">
                        <label for="signupName" class="form-label">الاسم الكامل</label>
                        <input type="text" id="signupName" class="form-input" placeholder="اسمك الكامل" required>
                    </div>
                    <div class="form-group">
                        <label for="signupEmail" class="form-label">البريد الإلكتروني</label>
                        <input type="email" id="signupEmail" class="form-input" placeholder="your@email.com" required>
                    </div>
                    <div class="form-group">
                        <label for="signupPassword" class="form-label">كلمة المرور</label>
                        <input type="password" id="signupPassword" class="form-input" placeholder="اختر كلمة مرور قوية" required>
                    </div>
                    <button type="submit" class="btn btn-primary">إنشاء حساب جديد</button>
                    <div class="auth-divider">أو</div>
                    <button type="button" class="btn btn-auth-google">
                        <svg viewBox="0 0 48 48">
                            <path fill="#EA4335" d="M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"/>
                            <path fill="#4285F4" d="M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"/>
                            <path fill="#FBBC05" d="M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"/>
                            <path fill="#34A853" d="M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"/>
                            <path fill="none" d="M0 0h48v48H0z"/>
                        </svg>
                        <span>التسجيل بحساب جوجل</span>
                    </button>
                </form>
            </div>
        </div>
    </div>

    <script>
    // Initialize Firebase
    const firebaseConfig = {
        apiKey: "AIzaSyCA15vsYqRg6X9gaKwxhuMGFwfKZvFvc3A",
        authDomain: "dima-cafe5.firebaseapp.com",
        projectId: "dima-cafe5",
        storageBucket: "dima-cafe5.firebasestorage.app",
        messagingSenderId: "606982365009",
        appId: "1:606982365009:web:19ca2da3167a452e11bd70",
        measurementId: "G-R7EN5C2L32"
    };

    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const provider = new firebase.auth.GoogleAuthProvider();

    document.addEventListener('DOMContentLoaded', () => {
        document.getElementById('currentYear').textContent = new Date().getFullYear();

        // Smooth Scroll for internal links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                const hrefAttribute = this.getAttribute('href');
                if (hrefAttribute === '#login-modal' || hrefAttribute === '#signup-modal') {
                    return;
                }

                // Special handling for #contact-form links in pricing to scroll to footer
                if (hrefAttribute === "#contact-form") {
                    e.preventDefault();
                    const contactSection = document.getElementById('get-started');
                    if (contactSection) {
                        contactSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                    return;
                }

                try {
                    const targetElement = document.querySelector(hrefAttribute);
                    if (targetElement) {
                        e.preventDefault();
                        targetElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                } catch (error) {
                    console.warn("Smooth scroll target not found or invalid:", hrefAttribute);
                }
            });
        });

            // Starfield generation
            const starfield = document.getElementById('starfield');
            const numStars = 120; // Slightly reduced for performance, can be adjusted
            if (starfield) {
                for (let i = 0; i < numStars; i++) {
                    let star = document.createElement('div');
                    star.className = 'star';
                    star.style.width = `${Math.random() * 1.3 + 0.2}px`; 
                    star.style.height = star.style.width;
                    star.style.left = `${Math.random() * 100}%`;
                    star.style.top = `${Math.random() * 100}%`;
                    star.style.animationDelay = `${Math.random() * 6}s`; 
                    star.style.animationDuration = `${Math.random() * 3.5 + 2.5}s`;
                    starfield.appendChild(star);
                }
            }

            // Neural Cosmos Path generation
            const cosmosContainer = document.getElementById('neuralCosmos');
            const numPaths = 5; // Slightly reduced for less clutter
            if (cosmosContainer && cosmosContainer.querySelector('.dima-core-node')) {
                for (let i = 0; i < numPaths; i++) {
                    const pathAngle = (360 / numPaths) * i + (Math.random() * 8 - 4); 
                    const pathLength = 160 + Math.random() * 60; 
                    const pathDiv = document.createElement('div');
                    pathDiv.className = 'cosmos-path';
                    pathDiv.style.setProperty('--initial-rotation', `${pathAngle}deg`);
                    pathDiv.style.height = `${pathLength}px`;
                    pathDiv.style.animationDuration = `${17 + Math.random() * 8}s`; 
                    
                    const cometDiv = document.createElement('div');
                    cometDiv.className = 'data-comet';
                    cometDiv.style.setProperty('--comet-delay', `${Math.random() * 4.5}s`);
                    pathDiv.appendChild(cometDiv);
                    cosmosContainer.appendChild(pathDiv);
                }
            }

            // Demo Chat Simulation
            const demoMessagesContainer = document.querySelector('.demo-chat-messages');
            const demoMessages = [ 
                { type: 'user', text: 'السلام، عندكم صبابط سبور؟' },
                { type: 'bot', text: 'وعليكم السلام! مرحباً بك في مجرة ديما! لدينا تشكيلة كونية. أي نوع أو ماركة تبحث عنها؟' },
                { type: 'user', text: 'وريلي لي مودال لي عندكم في النوار، مقاس 43. مريحين للسفر عبر النجوم.' },
                { type: 'bot', text: 'تمام! لحظة وأبحث لك... وجدنا أحذية "نجمية سوداء" مقاس 43، مثالية لرحلاتك! الدفع عند الاستلام متوفر.' },
                { type: 'user', text: 'ممتاز! كومونديلي واحد. شكراً!' }
            ];
            let messageIndex = 0;
            let demoChatStarted = false; 

            function addDemoMessage() {
                if (demoMessagesContainer && messageIndex < demoMessages.length) {
                    const msgData = demoMessages[messageIndex];
                    const bubble = document.createElement('div');
                    bubble.className = `chat-bubble ${msgData.type}`;
                    bubble.textContent = msgData.text;
                    demoMessagesContainer.appendChild(bubble);
                    setTimeout(() => { 
                        bubble.style.opacity = '1'; 
                        bubble.style.transform = 'translateY(0)'; 
                    }, 50);
                    demoMessagesContainer.scrollTop = demoMessagesContainer.scrollHeight; 
                    messageIndex++;
                    if (messageIndex < demoMessages.length) {
                         setTimeout(addDemoMessage, msgData.type === 'bot' ? 2600 : 2000); // Slightly faster
                    }
                }
            }

            // Scroll Animation Observer
            const animatedElements = document.querySelectorAll('.animate-on-scroll');
            const scrollObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        // Apply stagger delay if defined inline
                        const staggerDelay = entry.target.style.getPropertyValue('--stagger-delay');
                        if (staggerDelay && entry.target.classList.contains('stagger-item')) {
                             entry.target.style.transitionDelay = staggerDelay;
                        }
                        entry.target.classList.add('is-visible');
                        
                        if (entry.target.closest('.demo-cta-section') && !demoChatStarted && demoMessagesContainer) {
                            if (demoMessagesContainer.children.length === 0 && messageIndex === 0) {
                                demoChatStarted = true;
                                addDemoMessage();
                            }
                        }
                       // scrollObserver.unobserve(entry.target); 
                    }
                });
            }, { threshold: 0.08 }); // Reduced threshold slightly

            animatedElements.forEach(el => scrollObserver.observe(el));
        });

        // Auth Modal Functionality (from previous version, ensure it's robust)
        document.addEventListener('DOMContentLoaded', () => {
            const modal = document.getElementById('authModal');
            if (!modal) return; 

            const loginTrigger = document.querySelector('a[href="#login-modal"]');
            const signupTrigger = document.querySelector('a[href="#signup-modal"]');
            const closeBtn = modal.querySelector('.auth-modal-close');
            const tabBtns = modal.querySelectorAll('.auth-tab-btn');
            const forms = modal.querySelectorAll('.auth-form');

            function openModal(formIdToShow) {
                modal.hidden = false;
                document.body.style.overflow = 'hidden';
                
                requestAnimationFrame(() => { // Ensure display is set before adding class for transition
                    modal.classList.add('is-active');
                
                    tabBtns.forEach(btn => btn.classList.remove('is-active'));
                    forms.forEach(form => form.classList.remove('is-active'));

                    const targetTabButton = modal.querySelector(`.auth-tab-btn[data-auth-form="${formIdToShow}"]`);
                    const targetForm = document.getElementById(formIdToShow);

                    if (targetTabButton) targetTabButton.classList.add('is-active');
                    if (targetForm) {
                        targetForm.classList.add('is-active');
                        const firstInput = targetForm.querySelector('input:not([type="hidden"]), button:not(.auth-modal-close)');
                        if(firstInput) firstInput.focus();
                    }
                });
            }

            function closeModal() {
                modal.classList.remove('is-active');
                // Wait for animation to finish before hiding
                modal.addEventListener('transitionend', function handler() {
                    modal.hidden = true;
                    modal.removeEventListener('transitionend', handler);
                });
                document.body.style.overflow = '';
            }

            if(loginTrigger) {
                loginTrigger.addEventListener('click', (e) => { e.preventDefault(); openModal('loginForm'); });
            }
            if(signupTrigger) {
                signupTrigger.addEventListener('click', (e) => { e.preventDefault(); openModal('signupForm'); });
            }
            if(closeBtn) closeBtn.addEventListener('click', closeModal);
            modal.addEventListener('click', (e) => { if (e.target === modal) closeModal(); });
            document.addEventListener('keydown', (e) => { if (e.key === 'Escape' && modal.classList.contains('is-active')) closeModal(); });

            tabBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    const formId = btn.dataset.authForm;
                    // No need to call openModal again, just switch tabs and forms
                    tabBtns.forEach(b => b.classList.remove('is-active'));
                    btn.classList.add('is-active');
                    
                    forms.forEach(form => form.classList.remove('is-active'));
                    const targetForm = document.getElementById(formId);
                    if (targetForm) {
                        targetForm.classList.add('is-active');
                         const firstInput = targetForm.querySelector('input:not([type="hidden"]), button:not(.auth-modal-close)');
                        if(firstInput) firstInput.focus();
                    }
                });
            });
        });

        // Handle Signup
        const signupForm = document.getElementById('signupForm');
        signupForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('signupEmail').value;
            const password = document.getElementById('signupPassword').value;

            try {
                const userCredential = await createUserWithEmailAndPassword(auth, email, password);
                alert('Account created successfully!');
                console.log('User:', userCredential.user);
            } catch (error) {
                alert(error.message);
            }
        });

        // Handle Login
        const loginForm = document.getElementById('loginForm');
        loginForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;

            try {
                const userCredential = await signInWithEmailAndPassword(auth, email, password);
                alert('Logged in successfully!');
                console.log('User:', userCredential.user);
            } catch (error) {
                alert(error.message);
            }
        });

        // Handle Google Sign-In
        document.querySelectorAll('.btn-auth-google').forEach(button => {
            button.addEventListener('click', async () => {
                try {
                    const result = await signInWithPopup(auth, provider);
                    const user = result.user;
                    alert(`Logged in as ${user.displayName}`);
                    console.log('Google User:', user);
                } catch (error) {
                    console.error('Google Sign-In Error:', error);
                    alert('Failed to sign in with Google. Please try again.');
                }
            });
        });

        // Handle Logout (Optional)
        const logoutButton = document.getElementById('logoutButton'); // Add a logout button in your UI
        if (logoutButton) {
            logoutButton.addEventListener('click', async () => {
                try {
                    await signOut(auth);
                    alert('Logged out successfully!');
                } catch (error) {
                    alert(error.message);
                }
            });
        }
    </script>
</body>
</html>